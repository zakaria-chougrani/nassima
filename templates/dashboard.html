{% extends 'base.html' %}
{% load static %}

{% block content %}
    <div class="row">
        <div class="col-xl-3 col-sm-6 mb-xl-0 mb-4">
            <a href="{% url 'filtreAge' %}">
                <div class="card">
                    <div class="card-body p-3">
                        <div class="row">
                            <div class="col-8">
                                <div class="numbers">
                                    <p class="text-sm mb-0 text-uppercase font-weight-bold">Nombre de mères </p>
                                    <h5 class="font-weight-bolder">
                                        {{ nbr_mere }}
                                    </h5>
                                </div>
                            </div>
                            <div class="col-4 text-end">
                                <div class="icon icon-shape shadow-primary text-center rounded-circle">
                                    <svg style="height: 100%" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 320 512">
                                        <!--! Font Awesome Pro 6.4.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license (Commercial License) Copyright 2023 Fonticons, Inc. -->
                                        <path d="M160 0a48 48 0 1 1 0 96 48 48 0 1 1 0-96zM88 384H70.2c-10.9 0-18.6-10.7-15.2-21.1L93.3 248.1 59.4 304.5c-9.1 15.1-28.8 20-43.9 10.9s-20-28.8-10.9-43.9l53.6-89.2c20.3-33.7 56.7-54.3 96-54.3h11.6c39.3 0 75.7 20.6 96 54.3l53.6 89.2c9.1 15.1 4.2 34.8-10.9 43.9s-34.8 4.2-43.9-10.9l-33.9-56.3L265 362.9c3.5 10.4-4.3 21.1-15.2 21.1H232v96c0 17.7-14.3 32-32 32s-32-14.3-32-32V384H152v96c0 17.7-14.3 32-32 32s-32-14.3-32-32V384z"/>
                                    </svg>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </a>
        </div>
        <div class="col-xl-3 col-sm-6 mb-xl-0 mb-4">
            <a href="{% url 'filtreAge' %}">
                <div class="card">
                    <div class="card-body p-3">
                        <div class="row">
                            <div class="col-8">
                                <div class="numbers">
                                    <p class="text-sm mb-0 text-uppercase font-weight-bold">Nombre d'enfants</p>
                                    <h5 class="font-weight-bolder">
                                        {{ nbr_enfant }}
                                    </h5>
                                </div>
                            </div>
                            <div class="col-4 text-end">
                                <div class="icon icon-shape shadow-primary text-center rounded-circle">
                                    <svg style="height: 100%" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 512">
                                        <!--! Font Awesome Pro 6.4.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license (Commercial License) Copyright 2023 Fonticons, Inc. -->
                                        <path d="M160 0a64 64 0 1 1 0 128A64 64 0 1 1 160 0zM88 480V400H70.2c-10.9 0-18.6-10.7-15.2-21.1l31.1-93.4L57.5 323.3c-10.7 14.1-30.8 16.8-44.8 6.2s-16.8-30.7-6.2-44.8L65.4 207c22.4-29.6 57.5-47 94.6-47s72.2 17.4 94.6 47l58.9 77.7c10.7 14.1 7.9 34.2-6.2 44.8s-34.2 7.9-44.8-6.2l-28.6-37.8L265 378.9c3.5 10.4-4.3 21.1-15.2 21.1H232v80c0 17.7-14.3 32-32 32s-32-14.3-32-32V400H152v80c0 17.7-14.3 32-32 32s-32-14.3-32-32zM480 0a64 64 0 1 1 0 128A64 64 0 1 1 480 0zm-8 384v96c0 17.7-14.3 32-32 32s-32-14.3-32-32V300.5L395.1 321c-9.4 15-29.2 19.4-44.1 10s-19.4-29.2-10-44.1l51.7-82.1c17.6-27.9 48.3-44.9 81.2-44.9h12.3c33 0 63.7 16.9 81.2 44.9L619.1 287c9.4 15 4.9 34.7-10 44.1s-34.7 4.9-44.1-10L552 300.5V480c0 17.7-14.3 32-32 32s-32-14.3-32-32V384H472z"/>
                                    </svg>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </a>
        </div>
        {#        <div class="col-xl-3 col-sm-6 mb-xl-0 mb-4">#}
        {#            <div class="card">#}
        {#                <div class="card-body p-3">#}
        {#                    <div class="row">#}
        {#                        <div class="col-8">#}
        {#                            <div class="numbers">#}
        {#                                <p class="text-sm mb-0 text-uppercase font-weight-bold">Max Humidité</p>#}
        {#                                <h5 class="font-weight-bolder">#}
        {#                                    {{ max_hum_today.hum }} %#}
        {#                                </h5>#}
        {#                                <p class="mb-0">#}
        {#                                    <span class="text-danger text-sm font-weight-bolder">{{ max_hum_today.name }}</span>#}
        {#                                    Mesure d'Aujourd'hui#}
        {#                                </p>#}
        {#                            </div>#}
        {#                        </div>#}
        {#                        <div class="col-4 text-end">#}
        {#                            <div class="icon icon-shape bg-gradient-success shadow-primary text-center rounded-circle">#}
        {#                                <img src="{% static 'assets/img/icons/humidity.png' %}" alt="max" style="height: 80%">#}
        {#                            </div>#}
        {#                        </div>#}
        {#                    </div>#}
        {#                </div>#}
        {#            </div>#}
        {#        </div>#}
        {#        <div class="col-xl-3 col-sm-6">#}
        {#            <div class="card">#}
        {#                <div class="card-body p-3">#}
        {#                    <div class="row">#}
        {#                        <div class="col-8">#}
        {#                            <div class="numbers">#}
        {#                                <p class="text-sm mb-0 text-uppercase font-weight-bold">Min Humidité</p>#}
        {#                                <h5 class="font-weight-bolder">#}
        {#                                    {{ min_hum_today.hum }} %#}
        {#                                </h5>#}
        {#                                <p class="mb-0">#}
        {#                                    <span class="text-success text-sm font-weight-bolder">{{ min_hum_today.name }}</span>#}
        {#                                    Mesure d'Aujourd'hui#}
        {#                                </p>#}
        {#                            </div>#}
        {#                        </div>#}
        {#                        <div class="col-4 text-end">#}
        {#                            <div class="icon icon-shape bg-gradient-danger shadow-warning text-center rounded-circle">#}
        {#                                <img src="{% static 'assets/img/icons/humidity.png' %}" alt="max" style="height: 80%">#}
        {#                            </div>#}
        {#                        </div>#}
        {#                    </div>#}
        {#                </div>#}
        {#            </div>#}
        {#        </div>#}
    </div>
    {#    <div class="row mt-4">#}
    {#        <div class="col-lg-6 mb-lg-0 mb-4">#}
    {#            <div class="card z-index-2 h-100">#}
    {#                <div class="card-header pb-0 pt-3 bg-transparent">#}
    {#                    <h6 class="text-capitalize">Aperçu des températures:</h6>#}
    {#                </div>#}
    {#                <div class="card-body p-3">#}
    {#                    <div class="chart">#}
    {#                        <canvas id="chart-line-temp" class="chart-canvas" height="300"></canvas>#}
    {#                    </div>#}
    {#                </div>#}
    {#            </div>#}
    {#        </div>#}
    {#        <div class="col-lg-6">#}
    {#            <div class="card z-index-2 h-100">#}
    {#                <div class="card-header pb-0 pt-3 bg-transparent">#}
    {#                    <h6 class="text-capitalize">Aperçu des Humidités:</h6>#}
    {#                </div>#}
    {#                <div class="card-body p-3">#}
    {#                    <div class="chart">#}
    {#                        <canvas id="chart-line-humi" class="chart-canvas" height="300"></canvas>#}
    {#                    </div>#}
    {#                </div>#}
    {#            </div>#}
    {#        </div>#}
    {#    </div>#}
    {#    <div class="row mt-4">#}
    {#        <div class="col-lg-12 mb-lg-0 mb-4 text-center">#}
    {#            <a href="{% url 'export_csv' %}" class="btn btn-success"> Exporter toutes les données au format CSV </a>#}
    {#        </div>#}
    {#    </div>#}
    {#    <div class="row mt-4">#}
    {#        <div class="col-lg-12 mb-lg-0 mb-4">#}
    {#            <div class="card ">#}
    {#                <div class="card-header pb-0 p-3">#}
    {#                    <div class="d-flex justify-content-between">#}
    {#                        <h6 class="mb-2">le Dernier Enregistrement par Département :</h6>#}
    {#                    </div>#}
    {#                </div>#}
    {#                <div class="table-responsive">#}
    {#                    <table class="table align-items-center ">#}
    {#                        <tbody>#}
    {#                        {% for item in data_table %}#}
    {#                            <tr>#}
    {#                                <td class="w-30">#}
    {#                                    <div class="d-flex px-2 py-1 align-items-center">#}
    {#                                        <div>#}
    {#                                            <img src="{% static 'assets/img/icons/flags/MA.png' %}" alt="Country flag">#}
    {#                                        </div>#}
    {#                                        <div class="ms-4">#}
    {#                                            <p class="text-xs font-weight-bold mb-0">Département:</p>#}
    {#                                            <h6 class="text-sm mb-0">{{ item.name }}</h6>#}
    {#                                        </div>#}
    {#                                    </div>#}
    {#                                </td>#}
    {#                                <td>#}
    {#                                    <div class="text-center">#}
    {#                                        <p class="text-xs font-weight-bold mb-0">Température:</p>#}
    {#                                        <h6 class="text-sm mb-0">{{ item.temp }} C°</h6>#}
    {#                                    </div>#}
    {#                                </td>#}
    {#                                <td class="align-middle text-sm">#}
    {#                                    <div class="col text-center">#}
    {#                                        <p class="text-xs font-weight-bold mb-0">Humidité:</p>#}
    {#                                        <h6 class="text-sm mb-0">{{ item.hum }}%</h6>#}
    {#                                    </div>#}
    {#                                </td>#}
    {#                                <td>#}
    {#                                    <div class="text-center">#}
    {#                                        <p class="text-xs font-weight-bold mb-0">Date D'Enregistrement:</p>#}
    {#                                        <h6 class="text-sm mb-0">{{ item.dt |date:'d F Y j:i'}}</h6>#}
    {#                                    </div>#}
    {#                                </td>#}
    {#                            </tr>#}
    {#                        {% empty %}#}
    {#                            <tr>#}
    {#                                <td colspan="4" class="text-center"> Aucun enregistrement pour le moment !</td>#}
    {#                            </tr>#}
    {#                        {% endfor %}#}
    {#                        </tbody>#}
    {#                    </table>#}
    {#                </div>#}
    {#            </div>#}
    {#        </div>#}
    {#    </div>#}
    {#    <div class="row mt-4">#}
    {#        <div class="col-lg-12 mb-lg-0 mb-4">#}
    {#            <div class="card z-index-2 h-100">#}
    {#                <div class="card-header pb-0 pt-3 bg-transparent">#}
    {#                    <h6 class="text-capitalize">Aperçu des températures & Humidités:</h6>#}
    {#                </div>#}
    {#                <div class="card-body p-3">#}
    {#                    <div class="chart">#}
    {#                        <canvas id="chart-line-temp-hum" class="chart-canvas" height="300"></canvas>#}
    {#                    </div>#}
    {#                </div>#}
    {#            </div>#}
    {#        </div>#}
    {#    </div>#}
    {#    <script src="{% static 'assets/js/plugins/chartjs.min.js' %}"></script>#}
    {#    <script>#}
    {#        let temp_ctx = document.getElementById("chart-line-temp").getContext("2d");#}
    {#        let humi_ctx = document.getElementById("chart-line-humi").getContext("2d");#}
    {#        let humi_temp_ctx = document.getElementById("chart-line-temp-hum").getContext("2d");#}
    {##}
    {#        const dates = [{% for i in ensas_datas %} '{{i.dt |date:'d F Y j:i'}}', {% endfor %}];#}
    {#        const datas_temp = [{% for i in ensas_datas %} '{{i.temp}}', {% endfor %}];#}
    {#        const datas_hum = [{% for i in ensas_datas %} '{{i.hum}}', {% endfor %}];#}
    {##}
    {##}
    {#        let gradientStroke1 = temp_ctx.createLinearGradient(0, 230, 0, 50);#}
    {##}
    {#        gradientStroke1.addColorStop(1, 'rgba(94, 114, 228, 0.2)');#}
    {#        gradientStroke1.addColorStop(0.2, 'rgba(94, 114, 228, 0.0)');#}
    {#        gradientStroke1.addColorStop(0, 'rgba(94, 114, 228, 0)');#}
    {##}
    {##}
    {#        new Chart(temp_ctx, {#}
    {#            type: "line",#}
    {#            data: {#}
    {#                labels: dates,#}
    {#                datasets: [#}
    {#                    {#}
    {#                        label: "{{ensas_datas.first.departemant__name}}",#}
    {#                        tension: 0.4,#}
    {#                        pointRadius: 0,#}
    {#                        borderColor: "#5e72e4",#}
    {#                        backgroundColor: gradientStroke1,#}
    {#                        borderWidth: 3,#}
    {#                        fill: true,#}
    {#                        data: datas_temp,#}
    {#                        maxBarThickness: 6#}
    {##}
    {#                    }#}
    {#                ],#}
    {#            },#}
    {#            options: {#}
    {#                responsive: true,#}
    {#                maintainAspectRatio: false,#}
    {#                plugins: {#}
    {#                    legend: {#}
    {#                        display: false,#}
    {#                    }#}
    {#                },#}
    {#                interaction: {#}
    {#                    intersect: false,#}
    {#                    mode: 'index',#}
    {#                },#}
    {#                scales: {#}
    {#                    y: {#}
    {#                        grid: {#}
    {#                            drawBorder: false,#}
    {#                            display: true,#}
    {#                            drawOnChartArea: true,#}
    {#                            drawTicks: false,#}
    {#                            borderDash: [5, 5]#}
    {#                        },#}
    {#                        ticks: {#}
    {#                            display: true,#}
    {#                            padding: 10,#}
    {#                            color: '#fbfbfb',#}
    {#                            font: {#}
    {#                                size: 11,#}
    {#                                family: "Open Sans",#}
    {#                                style: 'normal',#}
    {#                                lineHeight: 2#}
    {#                            },#}
    {#                        }#}
    {#                    },#}
    {#                    x: {#}
    {#                        grid: {#}
    {#                            drawBorder: false,#}
    {#                            display: false,#}
    {#                            drawOnChartArea: false,#}
    {#                            drawTicks: false,#}
    {#                            borderDash: [5, 5]#}
    {#                        },#}
    {#                        ticks: {#}
    {#                            display: true,#}
    {#                            color: '#ccc',#}
    {#                            padding: 20,#}
    {#                            font: {#}
    {#                                size: 11,#}
    {#                                family: "Open Sans",#}
    {#                                style: 'normal',#}
    {#                                lineHeight: 2#}
    {#                            },#}
    {#                        }#}
    {#                    },#}
    {#                },#}
    {#            },#}
    {#        });#}
    {#        new Chart(humi_ctx, {#}
    {#            type: "line",#}
    {#            data: {#}
    {#                labels: dates,#}
    {#                datasets: [#}
    {#                    {#}
    {#                        label: "{{ensas_datas.first.departemant__name}}",#}
    {#                        tension: 0.4,#}
    {#                        pointRadius: 0,#}
    {#                        borderColor: "#5e72e4",#}
    {#                        backgroundColor: gradientStroke1,#}
    {#                        borderWidth: 3,#}
    {#                        fill: true,#}
    {#                        data: datas_hum,#}
    {#                        maxBarThickness: 6#}
    {##}
    {#                    }#}
    {#                ],#}
    {#            },#}
    {#            options: {#}
    {#                responsive: true,#}
    {#                maintainAspectRatio: false,#}
    {#                plugins: {#}
    {#                    legend: {#}
    {#                        display: false,#}
    {#                    }#}
    {#                },#}
    {#                interaction: {#}
    {#                    intersect: false,#}
    {#                    mode: 'index',#}
    {#                },#}
    {#                scales: {#}
    {#                    y: {#}
    {#                        grid: {#}
    {#                            drawBorder: false,#}
    {#                            display: true,#}
    {#                            drawOnChartArea: true,#}
    {#                            drawTicks: false,#}
    {#                            borderDash: [5, 5]#}
    {#                        },#}
    {#                        ticks: {#}
    {#                            display: true,#}
    {#                            padding: 10,#}
    {#                            color: '#fbfbfb',#}
    {#                            font: {#}
    {#                                size: 11,#}
    {#                                family: "Open Sans",#}
    {#                                style: 'normal',#}
    {#                                lineHeight: 2#}
    {#                            },#}
    {#                        }#}
    {#                    },#}
    {#                    x: {#}
    {#                        grid: {#}
    {#                            drawBorder: false,#}
    {#                            display: false,#}
    {#                            drawOnChartArea: false,#}
    {#                            drawTicks: false,#}
    {#                            borderDash: [5, 5]#}
    {#                        },#}
    {#                        ticks: {#}
    {#                            display: true,#}
    {#                            color: '#ccc',#}
    {#                            padding: 20,#}
    {#                            font: {#}
    {#                                size: 11,#}
    {#                                family: "Open Sans",#}
    {#                                style: 'normal',#}
    {#                                lineHeight: 2#}
    {#                            },#}
    {#                        }#}
    {#                    },#}
    {#                },#}
    {#            },#}
    {#        });#}
    {#        new Chart(humi_temp_ctx, {#}
    {#            type: "line",#}
    {#            data: {#}
    {#                labels: dates,#}
    {#                datasets: [#}
    {#                    {#}
    {#                        label: "Température {{ensas_datas.first.departemant__name}} ",#}
    {#                        tension: 0.4,#}
    {#                        pointRadius: 0,#}
    {#                        borderColor: "#e45e91",#}
    {#                        backgroundColor: gradientStroke1,#}
    {#                        borderWidth: 3,#}
    {#                        fill: true,#}
    {#                        data: datas_temp,#}
    {#                        maxBarThickness: 6#}
    {##}
    {#                    },{#}
    {#                        label: "Humidité {{ensas_datas.first.departemant__name}}",#}
    {#                        tension: 0.4,#}
    {#                        pointRadius: 0,#}
    {#                        borderColor: "#5ee494",#}
    {#                        backgroundColor: gradientStroke1,#}
    {#                        borderWidth: 3,#}
    {#                        fill: true,#}
    {#                        data: datas_hum,#}
    {#                        maxBarThickness: 6#}
    {##}
    {#                    }#}
    {#                ],#}
    {#            },#}
    {#            options: {#}
    {#                responsive: true,#}
    {#                maintainAspectRatio: false,#}
    {#                plugins: {#}
    {#                    legend: {#}
    {#                        display: false,#}
    {#                    }#}
    {#                },#}
    {#                interaction: {#}
    {#                    intersect: false,#}
    {#                    mode: 'index',#}
    {#                },#}
    {#                scales: {#}
    {#                    y: {#}
    {#                        grid: {#}
    {#                            drawBorder: false,#}
    {#                            display: true,#}
    {#                            drawOnChartArea: true,#}
    {#                            drawTicks: false,#}
    {#                            borderDash: [5, 5]#}
    {#                        },#}
    {#                        ticks: {#}
    {#                            display: true,#}
    {#                            padding: 10,#}
    {#                            color: '#fbfbfb',#}
    {#                            font: {#}
    {#                                size: 11,#}
    {#                                family: "Open Sans",#}
    {#                                style: 'normal',#}
    {#                                lineHeight: 2#}
    {#                            },#}
    {#                        }#}
    {#                    },#}
    {#                    x: {#}
    {#                        grid: {#}
    {#                            drawBorder: false,#}
    {#                            display: false,#}
    {#                            drawOnChartArea: false,#}
    {#                            drawTicks: false,#}
    {#                            borderDash: [5, 5]#}
    {#                        },#}
    {#                        ticks: {#}
    {#                            display: true,#}
    {#                            color: '#ccc',#}
    {#                            padding: 20,#}
    {#                            font: {#}
    {#                                size: 11,#}
    {#                                family: "Open Sans",#}
    {#                                style: 'normal',#}
    {#                                lineHeight: 2#}
    {#                            },#}
    {#                        }#}
    {#                    },#}
    {#                },#}
    {#            },#}
    {#        });#}
    {#    </script>#}
{% endblock %}